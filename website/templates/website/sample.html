{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ video_item.video_name }}</title>
    <link rel="stylesheet" href="{% static 'website/style.css' %}" >
</head>
<body>
    <div class="videoContainer">

        <div class="iframeContainer" id="player">
{#            <iframe id="existing-iframe-example" class="videoContainer__video" width="100%" height="100%"#}
{#                    frameborder="0"#}
{#                    src="{{ video_item.video_url }}?enablejsapi=1">#}
{#            </iframe>#}
        </div>



        <div class="buttonContainer">
            <button class="button" onclick="location.href='/funny/{{ prev_video_item_id }}'">Prev</button>
            <button class="button" onclick="location.href='/funny/{{ next_video_item_id }}'">Next</button>
            <button id="pauseplay" class="button">Pause/Play</button>

        </div>

        <script>
              // 2. This code loads the IFrame Player API code asynchronously.
              var tag = document.createElement('script');

              tag.src = "https://www.youtube.com/iframe_api";
              var firstScriptTag = document.getElementsByTagName('script')[0];
              firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

              // 3. This function creates an <iframe> (and YouTube player)
              //    after the API code downloads.
              var player;
              function onYouTubeIframeAPIReady() {
                player = new YT.Player('player', {
                    videoId: '{{ video_item.video_url }}',
                    playerVars: { 'autoplay': 1, 'controls': 1 , 'mute': 1, 'rel': 0, 'modestbranding': 0},
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                      }
                });
              }

              // 4. The API will call this function when the video player is ready.
              function onPlayerReady(event) {
                  document.getElementById("pauseplay").addEventListener(
                      'click', () => event.target.unMute()
                  );
              }

              // 5. The API calls this function when the player's state changes.
              //    The function indicates that when playing a video (state=1),
              //    the player should play for six seconds and then stop.
              var done = false;
              function onPlayerStateChange(event) {
                {#if (event.data == YT.PlayerState.PLAYING && !done) {#}
                {#    event.target.setVolume(100);#}
                {#    event.target.unMute();#}
                {#  done = true;#}
              }
              function stopVideo() {
                player.stopVideo();
              }
            </script>
    </div>
</body>

</html>